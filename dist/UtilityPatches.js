function v(o){window.enmity.plugins.registerPlugin(o)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const x=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const C=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox;const R=e.FormDivider;e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const N=e.FormRow,M=e.FormSection;e.FormSelect,e.FormSubLabel;const I=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;const P=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const s=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack;const f=window.enmity.modules.common.Theme;window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function E(o,t){return window.enmity.modules.getModule(o,t)}function u(...o){return window.enmity.modules.getByProps(...o)}function p(...o){return window.enmity.modules.getByName(...o)}window.enmity.modules.common;var L="UtilityPatches",D="1.1.5",k="Minor patches/fixes all bundled into a single plugin for convenience.",A="#ff0069",V=[{name:"Rosie<3",id:"581573474296791211"}],a={name:L,version:D,description:k,color:A,authors:V};function F(o,t,n){window.enmity.settings.set(o,t,n)}function w(o,t,n){return window.enmity.settings.get(o,t,n)}const d=o=>w(a.name,"settings",{})[o],b=(o,t)=>F(a.name,"settings",{...w(a.name,"settings",{}),[o]:t}),S={roleDot:{title:"Add Role Dots",subtitle:"Force-enables role-dots aswell with role-colors simultaneously disregarding your accessibility settings."},headerPrimary:{title:"Fix Text Labels",subtitle:"Forces all SettingRow and FormLabel Main text-labels use the 'text-normal' color instead of 'header-primary'."},mediaItems:{title:"Media Items",subtitle:()=>`Changes the amount of media items per row to '${w(a.name,"mediaItemsNumber",2)}' instead of the default '3' in new Media Picker experiment.`,custom:o=>{const t=E(g=>g.render.name==="SliderComponent"),n=p("FormLabel"),{meta:{resolveSemanticColor:i}}=u("colors","meta"),{ThemeColorMap:{HEADER_PRIMARY:r,BACKGROUND_PRIMARY:y}}=P,m=(g,T)=>s.createElement(n,{text:g,style:{[`margin${T}`]:16,opacity:o?.5:1}}),l=1,h=8;return s.createElement(C,{style:{alignItems:"center",flexDirection:"row"}},m(l,"Left"),s.createElement(t,{value:w(a.name,"mediaItemsNumber",2),minimumValue:l,maximumValue:h,style:{marginHorizontal:16,flex:1},minimumTrackTintColor:i(f.theme,r),maximumTrackTintColor:i(f.theme,y),step:1,onValueChange:g=>F(a.name,"mediaItemsNumber",g),key:"media-items-number",disabled:o,tapToSeek:!0}),m(h,"Right"))}},jsonFix:{title:"Upload JSON Files",subtitle:"Fixes a long-lasting bug of Discord (where JSON files couldn't be uploaded) by changing the file's 'Mime-Type'."}},B=o=>{w(a.name,"settings",{})[o]===void 0&&b(o,!0)};var O=()=>s.createElement(x,null,s.createElement(M,{title:"Preferences"},Object.entries(S).map(([o,{title:t,subtitle:n,custom:i}],r,y)=>{var m;const l=!d(o);return s.createElement(s.Fragment,null,s.createElement(N,{label:typeof t=="function"?t():t,subLabel:typeof n=="function"?n():n,trailing:()=>s.createElement(I,{value:d(o),onValueChange:h=>b(o,h)}),disabled:l}),(m=i==null?void 0:i(l))!=null?m:s.createElement(s.Fragment,null),r<y.length-1&&s.createElement(R,null))})));function j(o){return window.enmity.patcher.create(o)}function $(o,t,n){return window.enmity.utilities.findInReactTree(o,t,n)}const c=j("utils"),{NativeModules:{DCDChatManager:H}}=u("View","Text","NativeModules"),J=p("FormLabel",{default:!1}),{Text:U}=u("TextStyleSheet"),{getSettingTitle:z}=u("getSettingTitle"),_=p("SettingsOverviewScreen",{default:!1}),G=u("addFiles","popFirstFile"),K=u("getNumMediaItemsPerRow"),Y={...a,onStart(){Object.keys(S).forEach(t=>B(t)),c.before(H,"updateRows",(t,n)=>{if(!d("roleDot"))return;const i=JSON.parse(n[1]);for(const r of i)r.type===1&&(r.message.shouldShowRoleDot=!0,r.message.shouldShowRoleOnName=!0);n[1]=JSON.stringify(i)}),c.after(J,"default",(t,n,i)=>{!d("headerPrimary")||(i.props.color="text-normal")});const o=c.after(_,"default",(t,n,i)=>{o();const{sections:r}=$(i,m=>m.sections),y=r.map(m=>m.settings).reduce((m,l)=>[...m,...l],[]).map(m=>z(m));c.before(U,"render",(m,l)=>{!d("headerPrimary")||l[0].variant==="text-md/semibold"&&l[0].color==="header-primary"&&y.includes(l[0].children)&&(l[0].color="text-normal")})});c.instead(K,"getNumMediaItemsPerRow",(t,n,i)=>d("mediaItems")?w(a.name,"mediaItemsNumber",2):i.apply(t,n)),c.after(G,"addFiles",(t,n)=>{!d("jsonFix")||n[0].files.forEach(i=>{i.mimeType==="application/json"&&(i.mimeType="text/plain")})})},onStop(){c.unpatchAll()},getSettingsPanel(){return s.createElement(O,null)}};v(Y);
