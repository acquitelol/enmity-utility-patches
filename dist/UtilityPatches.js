function f(o){window.enmity.plugins.registerPlugin(o)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable,e.View,e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const F=e.FormRow,S=e.FormSection;e.FormSelect,e.FormSubLabel;const b=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes,window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const w=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;var v="UtilityPatches",T="1.1.3",x="Minor patches/fixes all bundled into a single plugin for convenience.",N="#ff0069",R=[{name:"Rosie<3",id:"581573474296791211"}],l={name:v,version:T,description:x,color:N,authors:R};function y(o,n,t){window.enmity.settings.set(o,n,t)}function u(o,n,t){return window.enmity.settings.get(o,n,t)}const d=o=>u(l.name,"settings",{})[o],C=(o,n)=>y(l.name,"settings",{...u(l.name,"settings",{}),[o]:n}),g={roleDot:["Add Role Dots","Force-enables role dots along with role colors no matter disregarding your accessibility settings"],headerPrimary:["Fix Text Labels","Makes all SettingRow and FormLabel main text labels use 'text-normal' instead of 'header-primary'."],mediaItems:["Media Items","Changes the amount of media items per row to '2' instead of the default '3' in new Media Picker experiment."],jsonFix:["Upload JSON Files","Fixes a long bug of Discord where JSON files couldn't be uploaded by changing the file's 'Mime-Type'."]},M=o=>{const n=u(l.name,"settings",{});n[o]===void 0&&y(l.name,"settings",{...n,[o]:!0})},P=()=>Object.keys(g).forEach(o=>M(o));var L=()=>w.createElement(S,{title:"Preferences"},Object.entries(g).map(([o,n])=>{var t,i;return w.createElement(F,{label:(t=n[0])!=null?t:"No title provided",subLabel:(i=n[1])!=null?i:"No description provided",trailing:()=>w.createElement(b,{value:d(o),onValueChange:s=>C(o,s)})})}));function I(o){return window.enmity.patcher.create(o)}function c(...o){return window.enmity.modules.getByProps(...o)}function p(...o){return window.enmity.modules.getByName(...o)}window.enmity.modules.common;function k(o,n,t){return window.enmity.utilities.findInReactTree(o,n,t)}const r=I("utils"),{NativeModules:{DCDChatManager:D}}=c("View","Text","NativeModules"),A=p("FormLabel",{default:!1}),{Text:B}=c("TextStyleSheet"),{getSettingTitle:O}=c("getSettingTitle"),E=p("SettingsOverviewScreen",{default:!1}),V=c("addFiles","popFirstFile"),j=c("getNumMediaItemsPerRow"),J={...l,onStart(){P(),r.before(D,"updateRows",(n,t)=>{if(!d("roleDot"))return;const i=JSON.parse(t[1]);for(const s of i)s.type===1&&(s.message.shouldShowRoleDot=!0,s.message.shouldShowRoleOnName=!0);t[1]=JSON.stringify(i)}),r.after(A,"default",(n,t,i)=>{!d("headerPrimary")||(i.props.color="text-normal")});const o=r.after(E,"default",(n,t,i)=>{o();const{sections:s}=k(i,m=>m.sections),h=s.map(m=>m.settings).reduce((m,a)=>[...m,...a],[]).map(m=>O(m));r.before(B,"render",(m,a)=>{!d("headerPrimary")||a[0].variant==="text-md/semibold"&&a[0].color==="header-primary"&&h.includes(a[0].children)&&(a[0].color="text-normal")})});r.instead(j,"getNumMediaItemsPerRow",(n,t,i)=>d("mediaItems")?2:i.apply(n,t)),r.after(V,"addFiles",(n,t)=>{!d("jsonFix")||t[0].files.forEach(i=>{i.mimeType==="application/json"&&(i.mimeType="text/plain")})})},onStop(){r.unpatchAll()},getSettingsPanel(){return w.createElement(L,null)}};f(J);
