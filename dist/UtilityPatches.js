const x=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const a=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const P=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;const A=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack;const v=window.enmity.modules.common.Theme;window.enmity.modules.common.Linking;const B=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles;const _=window.enmity.modules.common.Lodash;window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function D(e){window.enmity.plugins.registerPlugin(e)}function M(e){return window.enmity.patcher.create(e)}const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList,o.Image,o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const $=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch,o.Text,o.TextInput,o.TouchableHighlight,o.TouchableOpacity,o.TouchableWithoutFeedback,o.Touchable;const g=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox;const O=o.FormDivider;o.FormHint,o.FormIcon;const L=o.FormInput,V=o.FormLabel;o.FormRadio;const b=o.FormRow,U=o.FormSection;o.FormSelect,o.FormSubLabel;const j=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function F(e){return window.enmity.assets.getIDByName(e)}var z="UtilityPatches",H="1.2.1",J="Minor patches/fixes all bundled into a single plugin for convenience.",K="#ff91ff",Y=[{name:"Rosie<3",id:"581573474296791211"}],w={name:z,version:H,description:J,color:K,authors:Y};function G(e,t,n){window.enmity.settings.set(e,t,n)}function q(e,t,n){return window.enmity.settings.get(e,t,n)}const r=(e,t=!0)=>q(w.name,e,t),y=(e,t)=>G(w.name,e,t);function T(e,t){return window.enmity.modules.getModule(e,t)}function c(...e){return window.enmity.modules.getByProps(...e)}function E(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const{NativeModules:{DCDChatManager:W}}=c("View","Text");var Q={key:"roleDots",title:"Add Role Dots",subtitle:"Force-enables role-dots aswell as role-colors disregarding your accessibility settings.",icon:"ic_members",patch(e){e.before(W,"updateRows",(t,n)=>{if(!r(this.key))return;const i=JSON.parse(n[1]);for(const s of i)s.type===1&&(s.message.shouldShowRoleDot=!0,s.message.shouldShowRoleOnName=!0);n[1]=JSON.stringify(i)})}};function X(e,t,n){return window.enmity.utilities.findInReactTree(e,t,n)}const{BadgableTabBar:Z}=c("BadgableTabBar"),ee=T(e=>e.render.name==="SliderComponent"),oe=c("TextStyleSheet","Text"),{colors:xe,meta:C}=c("colors","meta"),{Text:te}=oe,ne=E("SettingsOverviewScreen",{default:!1}),ie=E("FormLabel",{default:!1}),{getSettingTitle:re}=c("getSettingTitle");var ae={key:"headerPrimary",title:"Fix Text Labels",subtitle:"Forces all Text Labels to use 'text-normal' instead of the default 'header-primary'.",icon:"ic_add_text",patch(e){e.after(ie,"default",(n,i,s)=>{!r(this.key)||s.props.color==="header-primary"&&(s.props.color="text-normal")});const t=e.after(ne,"default",(n,i,s)=>{t();const{sections:h}=X(s,m=>m.sections),p=h.map(m=>m.settings).reduce((m,l)=>[...m,...l],[]).map(m=>re(m));e.before(te,"render",(m,l)=>{!r(this.key)||l[0].variant==="text-md/semibold"&&l[0].color==="header-primary"&&p.includes(l[0].children)&&(l[0].color="text-normal")})})}};const se=c("getUserProfile");var me={key:"earlyPronouns",title:"Early Pronouns",subtitle:()=>`Set your own pronouns to ${r("pronouns","")} early. Keep in mind others will not be able to see this.`,icon:"ic_accessibility_24px",patch(e){e.after(se,"getUserProfile",(t,n,i)=>{n[0]!==A.getCurrentUser().id||!i||!r(this.key)||!r("pronouns","")||i.pronouns||(i.pronouns=r("pronouns",""))})},render(e){return a.createElement(L,{placeholder:"Your pronouns go here",title:"Pronouns",value:r("pronouns",""),onChange:t=>y("pronouns",t),disabled:e,style:{marginTop:-16}})}};const le=c("getNumMediaItemsPerRow"),{ThemeColorMap:{HEADER_PRIMARY:ce,BACKGROUND_PRIMARY:de}}=x,k=(e,t)=>a.createElement(V,{text:e,color:"text-normal",style:{marginHorizontal:24,opacity:t?.5:1}});var ue={key:"mediaItems",title:"Media Items",subtitle:()=>`Changes the amount of media items per row in media picker to '${r("mediaItemsNumber",2)}' instead of the default '3'.`,icon:"ic_image",patch(e){e.instead(le,"getNumMediaItemsPerRow",(t,n,i)=>r(this.key)?r("mediaItemsNumber",2):i.apply(t,n))},render(e){return a.createElement(g,{style:{alignItems:"center",flexDirection:"row"}},k(1,e),a.createElement(ee,{value:r("mediaItemsNumber",2),minimumValue:1,maximumValue:8,style:{flex:1},minimumTrackTintColor:C.resolveSemanticColor(v.theme,ce),maximumTrackTintColor:C.resolveSemanticColor(v.theme,de),step:1,onValueChange:t=>y("mediaItemsNumber",t),disabled:e,tapToSeek:!0}),k(8,e))}};const we=c("addFiles","popFirstFile");var ye={key:"jsonFix",title:"Upload JSON Files",subtitle:"Fixes a long-lasting bug of Discord where JSON files couldn't be sent properly.",icon:"icon-qs-files",patch(e){e.after(we,"addFiles",(t,n)=>{!r(this.key)||n[0].files.forEach(i=>{i.mimeType==="application/json"&&(i.mimeType="text/plain")})})}},he={key:"toastFix",title:"Format Toasts",subtitle:"Adds a key to toasts when opened (if it doesn't exist) and renames 'source' to 'icon'.",icon:"ic_feedback_24px",patch(e){e.before(P,"open",(t,n)=>{!r(this.key)||(n[0].source&&(n[0].icon=n[0].source),!n[0].key&&(n[0].key=Math.random().toString()))})}};const{default:pe}=T(e=>{var t,n;return((n=(t=e==null?void 0:e.default)==null?void 0:t.render)==null?void 0:n.name)==="ActionSheet"});var ge={key:"expandableSheet",title:"Expandable ActionSheets",subtitle:()=>`Forces any User-Profile Action Sheets to always initially render as ${r("shouldExpand",!1)?"":"non-"}expanded.`,icon:()=>`ic_chevron_${r("shouldExpand",!1)?"up":"down"}_24px`,patch(e){e.before(pe,"render",(t,n)=>{!n[0].startExpanded||!r(this.key)||(n[0].startExpanded=r("shouldExpand",!1))})},render(e){const[t,n]=a.useState(String(!!r("shouldExpand",!1)));return a.createElement(g,{style:{opacity:e?.5:1,marginHorizontal:16,marginBottom:12}},a.createElement(Z,{tabs:[{id:"false",title:"Non-expanded"},{id:"true",title:"Expanded"}],activeTab:t,onTabSelected:i=>!e&&(y("shouldExpand",JSON.parse(i)),n(i))}))}};const N={recommended:{icon:"img_nitro_star",patches:{headerPrimary:ae,jsonFix:ye,toastFix:he,mediaItems:ue}},preferences:{icon:"ic_pencil_24px",patches:{roleDots:Q,earlyPronouns:me,expandableSheet:ge}}},be=e=>Object.values(N).forEach(t=>{Object.values(t.patches).forEach(n=>{var i;try{n.patch(e)}catch(s){console.error(`Patch ${n.key} errored with error ${(i=s.message)!=null?i:s}`)}})}),f=B.createThemedStyleSheet({view:{backgroundColor:x.ThemeColorMap.BACKGROUND_SECONDARY_ALT},section:{marginHorizontal:16,borderRadius:12,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},icon:{width:12,height:12}});var fe=()=>a.createElement($,{style:f.view},Object.entries(N).map(([e,{icon:t,patches:n}])=>a.createElement(U,{title:_.capitalize(e),icon:a.createElement(b.Icon,{style:f.icon,source:F(t)}),sectionBodyStyle:f.section,uppercaseTitle:!1},Object.entries(n).map(([i,s],h,p)=>{var m;const{title:l,subtitle:u,icon:d,render:S}=s;return a.createElement(a.Fragment,null,a.createElement(b,{label:l,subLabel:typeof u=="function"?u==null?void 0:u():u,leading:d&&a.createElement(b.Icon,{source:F(typeof d=="function"?d==null?void 0:d():d)}),trailing:()=>a.createElement(j,{value:!!r(i,!0),onValueChange:I=>y(i,!!I)}),disabled:!r(i,!0)}),(m=S==null?void 0:S(!r(i,!0)))!=null?m:a.createElement(a.Fragment,null),h<p.length-1&&a.createElement(O,null))}))),a.createElement(g,{style:{marginBottom:50}}));const R=M(w.name),Se={...w,onStart(){be(R)},onStop(){R.unpatchAll()},getSettingsPanel(){return a.createElement(fe,null)}};D(Se);
