function f(o){window.enmity.plugins.registerPlugin(o)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable,e.View,e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const F=e.FormRow,S=e.FormSection;e.FormSelect,e.FormSubLabel;const b=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes,window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const w=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;var v="UtilityPatches",T="1.1.3",x="Minor patches/fixes all bundled into a single plugin for convenience.",N="#ff0069",R=[{name:"Rosie<3",id:"581573474296791211"}],d={name:v,version:T,description:x,color:N,authors:R};function y(o,t,n){window.enmity.settings.set(o,t,n)}function u(o,t,n){return window.enmity.settings.get(o,t,n)}const l=o=>u(d.name,"settings",{})[o],C=(o,t)=>y(d.name,"settings",{...u(d.name,"settings",{}),[o]:t}),g={roleDot:["Add Role Dots","Force-enables role dots no matter what your accessibilty settings"],headerPrimary:["Fix Text Labels","Makes all SettingRow text labels use text-normal instead of header-primary"],mediaItems:["Media Items","Changes the amount of media items per row to 2 instead of the default 3"],jsonFix:["Upload JSON Files","Fixes a long bug of Discord where JSON files couldn't be uploaded"]},P=o=>{const t=u(d.name,"settings",{});t[o]===void 0&&y(d.name,"settings",{...t,[o]:!0})},M=()=>Object.keys(g).forEach(o=>P(o));var I=()=>w.createElement(S,{title:"Preferences"},Object.entries(g).map(([o,t])=>{var n,i;return w.createElement(F,{label:(n=t[0])!=null?n:"No title provided",subLabel:(i=t[1])!=null?i:"No description provided",trailing:()=>w.createElement(b,{value:l(o),onValueChange:s=>C(o,s)})})}));function L(o){return window.enmity.patcher.create(o)}function c(...o){return window.enmity.modules.getByProps(...o)}function p(...o){return window.enmity.modules.getByName(...o)}window.enmity.modules.common;function D(o,t,n){return window.enmity.utilities.findInReactTree(o,t,n)}const r=L("utils"),{NativeModules:{DCDChatManager:k}}=c("View","Text","NativeModules"),A=p("FormLabel",{default:!1}),{Text:B}=c("TextStyleSheet"),{getSettingTitle:O}=c("getSettingTitle"),E=p("SettingsOverviewScreen",{default:!1}),V=c("addFiles","popFirstFile"),j=c("getNumMediaItemsPerRow"),J={...d,onStart(){M(),r.before(k,"updateRows",(t,n)=>{if(!l("roleDot"))return;const i=JSON.parse(n[1]);for(const s of i)s.type===1&&(s.message.shouldShowRoleDot=!0,s.message.shouldShowRoleOnName=!0);n[1]=JSON.stringify(i)}),r.after(A,"default",(t,n,i)=>{!l("headerPrimary")||(i.props.color="text-normal")});const o=r.after(E,"default",(t,n,i)=>{o();const{sections:s}=D(i,m=>m.sections),h=s.map(m=>m.settings).reduce((m,a)=>[...m,...a],[]).map(m=>O(m));r.before(B,"render",(m,a)=>{!l("headerPrimary")||a[0].variant==="text-md/semibold"&&a[0].color==="header-primary"&&h.includes(a[0].children)&&(a[0].color="text-normal")})});r.instead(j,"getNumMediaItemsPerRow",(t,n,i)=>l("mediaItems")?2:i.apply(t,n)),r.after(V,"addFiles",(t,n)=>{!l("jsonFix")||n[0].files.forEach(i=>{i.mimeType==="application/json"&&(i.mimeType="text/plain")})})},onStop(){r.unpatchAll()},getSettingsPanel(){return w.createElement(I,null)}};f(J);
