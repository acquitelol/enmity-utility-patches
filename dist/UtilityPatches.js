function v(e){window.enmity.plugins.registerPlugin(e)}const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList,o.Image,o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const T=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch,o.Text,o.TextInput,o.TouchableHighlight,o.TouchableOpacity,o.TouchableWithoutFeedback,o.Touchable;const x=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox;const N=o.FormDivider;o.FormHint,o.FormIcon;const P=o.FormInput;o.FormLabel,o.FormRadio;const f=o.FormRow,C=o.FormSection;o.FormSelect,o.FormSubLabel;const I=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;const R=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const r=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;const E=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack;const S=window.enmity.modules.common.Theme;window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const c={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,t)=>window.enmity.modules.filters.byName(e,t),byTypeName:(e,t)=>window.enmity.modules.filters.byTypeName(e,t),byDisplayName:(e,t)=>window.enmity.modules.filters.byDisplayName(e,t)};function M(e,t){return window.enmity.modules.getModule(e,t)}function D(...e){return window.enmity.modules.bulk(...e)}function A(...e){return window.enmity.modules.getByProps(...e)}function L(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;var k="UtilityPatches",B="1.1.6",V="Minor patches/fixes all bundled into a single plugin for convenience.",_="#ff0069",O=[{name:"Rosie<3",id:"581573474296791211"}],p={name:k,version:B,description:V,color:_,authors:O};function U(e,t,n){window.enmity.settings.set(e,t,n)}function j(e,t,n){return window.enmity.settings.get(e,t,n)}const s=(e,t)=>j(p.name,e,t),g=(e,t)=>U(p.name,e,t),H={roleDot:{title:"Add Role Dots",subtitle:"Force-enables role-dots aswell as role-colors disregarding your accessibility settings.",icon:"ic_members"},headerPrimary:{title:"Fix Text Labels",subtitle:"Forces all Text Labels to use the old 'text-normal' instead of the default 'header-primary'.",icon:"ic_add_text"},earlyPronouns:{title:"Early Pronouns",subtitle:()=>`Set your own pronouns to ${s("pronouns","")} early. Keep in mind others will not be able to see this.`,icon:"ic_accessibility_24px",custom:e=>r.createElement(P,{placeholder:"Your pronouns go here",title:"Pronouns",value:s("pronouns",""),onChange:t=>g("pronouns",t),disabled:e,style:{marginTop:-16}})},mediaItems:{title:"Media Items",subtitle:()=>`Changes the amount of media items per row in media picker to '${s("mediaItemsNumber",2)}' instead of the default '3'.`,icon:"ic_image",custom:e=>{const t=M(u=>u.render.name==="SliderComponent"),n=L("FormLabel"),{meta:{resolveSemanticColor:i}}=A("colors","meta"),{ThemeColorMap:{HEADER_PRIMARY:a,BACKGROUND_PRIMARY:w}}=R,m=u=>r.createElement(n,{text:u,style:{marginHorizontal:24,opacity:e?.5:1}}),l=1,y=8;return r.createElement(x,{style:{alignItems:"center",flexDirection:"row"}},m(l),r.createElement(t,{value:s("mediaItemsNumber",2),minimumValue:l,maximumValue:y,style:{flex:1},minimumTrackTintColor:i(S.theme,a),maximumTrackTintColor:i(S.theme,w),step:1,onValueChange:u=>g("mediaItemsNumber",u),disabled:e,tapToSeek:!0}),m(y))}},jsonFix:{title:"Upload JSON Files",subtitle:"Fixes a long-lasting bug of Discord where JSON files couldn't be uploaded and sent properly.",icon:"icon-qs-files"},neverExpand:{title:"Never expand ActionSheets",subtitle:"Always render any ActionSheets (such as User Profiles, Messages, etc) as non-expanded.",icon:"ic_expand_more_24px"}};function J(e){return window.enmity.assets.getIDByName(e)}var $=()=>r.createElement(T,null,r.createElement(C,{title:"Preferences"},Object.entries(H).map(([e,t],n,i)=>{var a;const{title:w,subtitle:m,icon:l,custom:y}=t,[u,F]=r.useState(s(e,!0)),b=!s(e,!0);return r.createElement(r.Fragment,null,r.createElement(f,{label:w,subLabel:typeof m=="function"?m==null?void 0:m():m,leading:l&&r.createElement(f.Icon,{source:J(l)}),trailing:()=>r.createElement(I,{value:u,onValueChange:h=>(g(e,h),F(h))}),disabled:b}),(a=y==null?void 0:y(b))!=null?a:r.createElement(r.Fragment,null),n<i.length-1&&r.createElement(N,null))})));function z(e){return window.enmity.patcher.create(e)}function K(e,t,n){return window.enmity.utilities.findInReactTree(e,t,n)}const d=z("utils"),[{NativeModules:{DCDChatManager:Y}},G,{Text:q},{getSettingTitle:W},Q,X,Z,ee,{default:oe}]=D(c.byProps("View","Text","NativeModules"),c.byName("FormLabel",!1),c.byProps("TextStyleSheet"),c.byProps("getSettingTitle"),c.byName("SettingsOverviewScreen",!1),c.byProps("getUserProfile"),c.byProps("getNumMediaItemsPerRow"),c.byProps("addFiles","popFirstFile"),e=>{var t,n;return((n=(t=e==null?void 0:e.default)==null?void 0:t.render)==null?void 0:n.name)==="ActionSheet"}),te={...p,onStart(){d.before(Y,"updateRows",(t,n)=>{if(!s("roleDot"))return;const i=JSON.parse(n[1]);for(const a of i)a.type===1&&(a.message.shouldShowRoleDot=!0,a.message.shouldShowRoleOnName=!0);n[1]=JSON.stringify(i)}),d.after(G,"default",(t,n,i)=>{!s("headerPrimary")||(i.props.color="text-normal")});const e=d.after(Q,"default",(t,n,i)=>{e();const{sections:a}=K(i,m=>m.sections),w=a.map(m=>m.settings).reduce((m,l)=>[...m,...l],[]).map(m=>W(m));d.before(q,"render",(m,l)=>{!s("headerPrimary")||l[0].variant==="text-md/semibold"&&l[0].color==="header-primary"&&w.includes(l[0].children)&&(l[0].color="text-normal")})});d.after(X,"getUserProfile",(t,n,i)=>{n[0]!==E.getCurrentUser().id||!s("pronouns","")||!i||i.pronouns||(i.pronouns=s("pronouns",""))}),d.instead(Z,"getNumMediaItemsPerRow",(t,n,i)=>s("mediaItems")?s("mediaItemsNumber",2):i.apply(t,n)),d.after(ee,"addFiles",(t,n)=>{!s("jsonFix")||n[0].files.forEach(i=>{i.mimeType==="application/json"&&(i.mimeType="text/plain")})}),d.after(oe,"render",(t,n)=>{!s("neverExpand")||(n[0].startExpanded=!1)})},onStop(){d.unpatchAll()},getSettingsPanel(){return r.createElement($,null)}};v(te);
